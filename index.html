<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Katalog Properti</title>
  <script src="https://unpkg.com/@supabase/supabase-js@2">function updateWhatsAppLink() {
  const phone = '6281234567890'; // GANTI nomor WhatsApp kamu
  const message = `Halo, saya tertarik dengan properti:${title.value} Lokasi: ${location.value} Harga: ${price.value}; const url = https://wa.me/${phone}?text=${encodeURIComponent(message)}`; document.getElementById('waPreview').href = url; } </script>

  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background:#f5f5f5; }
    input, textarea, button { width: 100%; padding: 10px; margin: 8px 0; }
    .hidden { display: none; }
    .box { background:#fff; padding:15px; border-radius:8px; }
  </style></head>
<body><h2>Login Admin</h2>
<div id="login" class="box">
  <input type="email" id="email" placeholder="Email admin" />
  <input type="password" id="password" placeholder="Password" />
  <button onclick="login()">Login</button>
</div><div id="admin" class="box hidden">
  <h2>Tambah Properti</h2>
  <input id="title" placeholder="Judul Properti" />
  <input id="type" placeholder="Jenis Properti" />
  <input id="location" placeholder="Lokasi" />
  <input id="price" placeholder="Harga" />
  <textarea id="description" placeholder="Deskripsi"></textarea><label><b>Upload Banyak Foto</b></label> <input type="file" id="images" multiple accept="image/*" />

<button onclick="addProperty()">Simpan Properti</button>

  <hr>
  <h3>Preview Tombol WhatsApp (untuk klien)</h3>
  <a id="waPreview" href="#" target="_blank" style="display:block;text-align:center;background:#25D366;color:#fff;padding:12px;border-radius:6px;text-decoration:none;">Hubungi via WhatsApp</a>
</div><script>
  // FIX: Supabase client harus lewat window.supabase
  const supabaseUrl = "https://iiaxhilmcjtnfojxnhzf.supabase.co";
  const supabaseKey = "sb_publishable_gdn_tknvQ4Q6O8IclDPT3A_LZLtaANN";

  const supabase = window.supabase.createClient(
    supabaseUrl,
    supabaseKey
  );

  async function login() {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;

    if (!email || !password) {
      alert("Email dan password wajib diisi");
      return;
    }

    const { error } = await supabase.auth.signInWithPassword({
      email,
      password
    });

    if (error) {
      alert("LOGIN GAGAL: " + error.message);
    } else {
      alert("LOGIN BERHASIL");
      document.getElementById("loginBox").classList.add("hidden");
      document.getElementById("adminBox").classList.remove("hidden");
    }
  }

  async function logout() {
    await supabase.auth.signOut();
    location.reload();
  }
</script></body>
</html>
